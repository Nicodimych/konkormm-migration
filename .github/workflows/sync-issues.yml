name: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Issues –≤ QUESTIONS.md

on:
  issues:
    types: [opened]

permissions:
  contents: write
  issues: write
  pull-requests: write

jobs:
  sync-issue-to-questions:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
        uses: actions/checkout@v4
        
      - name: –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ Issue
        id: issue
        run: |
          echo "ISSUE_NUMBER=${{ github.event.issue.number }}" >> $GITHUB_OUTPUT
          echo "ISSUE_TITLE=${{ github.event.issue.title }}" >> $GITHUB_OUTPUT
          echo "ISSUE_BODY<<EOF" >> $GITHUB_OUTPUT
          echo "${{ github.event.issue.body }}" >> $GITHUB_OUTPUT
          echo "EOF" >> $GITHUB_OUTPUT
          echo "ISSUE_AUTHOR=${{ github.event.issue.user.login }}" >> $GITHUB_OUTPUT
          
      - name: –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å –≤ QUESTIONS.md
        run: |
          # –î–æ–±–∞–≤–ª—è–µ–º –≤–æ–ø—Ä–æ—Å –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞
          echo "" >> QUESTIONS.md
          echo "---" >> QUESTIONS.md
          echo "" >> QUESTIONS.md
          echo "### ‚ùì ${{ github.event.issue.number }}. ${{ github.event.issue.title }}" >> QUESTIONS.md
          echo "" >> QUESTIONS.md
          echo "**–ê–≤—Ç–æ—Ä:** @${{ github.event.issue.user.login }}" >> QUESTIONS.md
          echo "**–í–æ–ø—Ä–æ—Å:**" >> QUESTIONS.md
          echo "" >> QUESTIONS.md
          echo "${{ github.event.issue.body }}" >> QUESTIONS.md
          echo "" >> QUESTIONS.md
          echo "**–°—Ç–∞—Ç—É—Å:** ‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞" >> QUESTIONS.md
          echo "**–î–µ–¥–ª–∞–π–Ω:** TBD" >> QUESTIONS.md
          echo "**GitHub Issue:** #${{ github.event.issue.number }}" >> QUESTIONS.md
          echo "" >> QUESTIONS.md
          echo "**–û—Ç–≤–µ—Ç:**" >> QUESTIONS.md
          echo "_–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –æ—Ç–≤–µ—Ç –æ—Ç AI-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–∞ –∏ –∫–æ–º–∞–Ω–¥—ã_" >> QUESTIONS.md
          echo "" >> QUESTIONS.md
          
      - name: –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
        run: |
          git config user.name "GitHub Actions Bot"
          git config user.email "actions@github.com"
          git add QUESTIONS.md
          git commit -m "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤–æ–ø—Ä–æ—Å #${{ github.event.issue.number }} –∏–∑ Issue"
          git push
          
      - name: –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ Issue
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: '‚úÖ –í–∞—à –≤–æ–ø—Ä–æ—Å –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Ñ–∞–π–ª QUESTIONS.md –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –ª–æ–∫–∞–ª—å–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º.\n\n–û—Ç–≤–µ—Ç –ø–æ—è–≤–∏—Ç—Å—è –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è –∏ –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω –∫–∞–∫ –∑–¥–µ—Å—å, —Ç–∞–∫ –∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–ª–∞–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.\n\nüìñ –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –º–æ–∂–Ω–æ –≤ Pull Request, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.'
            })

